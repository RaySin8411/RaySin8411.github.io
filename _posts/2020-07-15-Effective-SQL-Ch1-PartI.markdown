---
layout: post
title:  "資料模型設計 Part I"
date:   2020-07-15 22:34:30 +0800
categories: Database
tags : SQL Database
mathjax: true
---
* content 
{:toc}
「你無法用母豬的耳朵製作絲綢包」-Stephen Gosson




## 01 確定所有資料表都有主鍵
什麼才是好的主鍵?欄應該具有下列特徵 : 
* 儲存獨特值
* 不能為空
* 穩定(也就是不會改變)
* 盡可能簡單

建議不要使用複合主鍵，它們因兩個理由而比較沒效率 :
1. 定義主鍵時，大部分資料庫系統會強制索引定義。一個欄以上的獨特索引需要資料庫系統執行更多的工作。
2. 對主鍵執行聯集是相當常見的，但在多欄主鍵上執行則更為複雜與緩慢。

## 02 消除重複儲存資料
* 資料庫正規化的目的是消除重複資料並減少處理資料時所需的資源。
* 消除重複資料可消除新增、修改、與刪除異常。
* 消除重複資料可減少不一致的資料。

## 03 去除重複組群
* 資料庫正規化的目標是消除重複資料群組並減少schema的變動。
* 消除重複資料群組後，你可以使用索引來防止重複的資料並大幅簡化查詢。
* 消除重複資料群組讓設計更為彈性，因為加入新的群組只需要另一個資料列而不用改變資料表設計以增加欄。

## 04 每個欄只儲存一個屬性
* 正確的資料表設計會將個別屬性放在獨立的欄中，因為欄帶中有多個屬性時，搜尋與彙整會變得困難甚或不可能。 
* 對某些應用程式，過濾地址或電話欄的部分內容的需求會決定細分的程度。
* 需要重新組合資料屬性時使用連接函式。

## 05 儲存計算出的資料通常不是好主意
* 許多系統讓你在定義資料表時定義計算出的欄，但你必須了解效能的影響，特別是使用非決定性表示式或函示時。
* 你也可以定義與一般欄相同的計算欄並以觸發器維護，但程式會相當複雜。
* 計算欄會對資料庫系統產生負擔，因此只能在好處大於成本時使用。
* 通常你會想要對計算欄製作索引，以儲存空間與較慢的更新換得一些好處。
* 不做索引時，使用檢視表來定義計算通常比在資料表中儲存計算是更好的做法。
